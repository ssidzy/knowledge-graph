<!DOCTYPE html>
<html>
<head>
  <title>Knowledge Graph</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
  <style>
    #cy {
      width: 100%;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <div id="cy"></div>
  <script>
    fetch('graph.json')
      .then(res => {
        if (!res.ok) throw new Error("Fetch failed");
        return res.json();
      })
      .then(data => {
        cytoscape({
          container: document.getElementById('cy'),
          elements: data,
          style: [{
            selector: 'node',
            style: {
              'label': 'data(label)',
              'background-color': '#00bcd4',
              'color': '#fff',
              'text-valign': 'center',
              'text-halign': 'center',
              'font-size': '12px'
            }
          }, {
            selector: 'edge',
            style: {
              'width': 2,
              'line-color': '#ccc',
              'target-arrow-color': '#ccc',
              'target-arrow-shape': 'triangle'
            }
          }],
          layout: { name: 'cose' }
        }).on('tap', 'node', evt => {
          const path = evt.target.data('path');
          if (path) window.open(path, '_blank');
        });
      })
      .catch(err => {
        console.error("Graph load failed", err);
      });
  </script>
</body>
</html>
